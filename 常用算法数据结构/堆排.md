参考代码：

```java
class Sort {
    public static void sort(int[] nums) throws Exception {
        heapSort(nums);
    }

    private static void heapSort(int[] nums) throws Exception {
        MaxHeap maxHeap = new MaxHeap(nums.length);
        for (int i = 0; i < nums.length; i++)
            maxHeap.insert(nums[i]);
        for (int index = nums.length - 1; index >= 0; index--) {
            nums[index] = maxHeap.remove();
        }
    }

}

class MaxHeap {
    private int[] nums;
    private int len;
    private int size;

    public MaxHeap(int size) {
        this.nums = new int[size];
        this.len = 0;
        this.size = size;
    }

    private void swap(int[] nums, int x, int y) {
        int t = nums[x];
        nums[x] = nums[y];
        nums[y] = t;
    }

    public void insert(int val) throws Exception {
        if (len == size)
            throw new Exception();
        int index = len;
        nums[len++] = val;
        while (index > 0) {
            int parent = (index - 1) / 2;
            if (nums[parent] >= nums[index])
                break;
            else {
                swap(nums, parent, index);
                index = parent;
            }
        }
    }

    public int remove() throws Exception {
        if (len == 0)
            throw new Exception();
        int ans = nums[0];
        nums[0] = nums[--len];
        int index = 0;
        while (index < len) {
            int child = index * 2 + 1;
            if (child >= len)
                break;
            if (child + 1 < len && nums[child] < nums[child + 1])
                child++;
            if (nums[index] >= nums[child])
                break;
            swap(nums, index, child);
            index = child;
        }
        return ans;
    }
}
```

